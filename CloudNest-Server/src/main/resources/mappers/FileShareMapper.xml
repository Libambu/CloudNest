<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yulong.easypan.mappers.FileShareMapper">

    <insert id="insert">
        insert into file_share values (#{shareId}, #{fileId}, #{userId}, #{validType},
                                       #{expireTime}, #{shareTime}, #{code}, #{showCount})
    </insert>
    <update id="updateShareShowCount">
        update file_share set show_count = show_count + 1 where share_id = #{shareId}
    </update>
    <delete id="deleteFileShareBatch">
        delete from file_share where user_id = #{userId}
        and share_id in(<foreach collection="shareIdArray" separator="," item="item">#{item}</foreach>)
    </delete>

    <select id="LoadDateList" resultType="com.yulong.easypan.entity.pjo.FileShare">
        select * from file_share
        <where>
            <if test="shareId != null and shareId != ''">
                AND share_id = #{shareId}
            </if>
            <if test="fileId != null and fileId != ''">
                AND file_id = #{fileId}
            </if>
            <if test="userId != null and userId != ''">
                AND user_id = #{userId}
            </if>
            <if test="validType != null">
                AND valid_type = #{validType}
            </if>
            <if test="expireTime != null">
                AND expire_time = #{expireTime}
            </if>
            <if test="shareTime != null">
                AND share_time = #{shareTime}
            </if>
            <if test="code != null and code != ''">
                AND code = #{code}
            </if>
            <if test="showCount != null">
                AND show_count = #{showCount}
            </if>
        </where>
    </select>
</mapper>