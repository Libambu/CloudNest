import{k as x,r as c,al as a,o as b,c as w,a as e,R as r,P as l,J as m,W as R,a6 as V,O as N}from"./@vue-d3a85cbd.js";import{u as D,b as q}from"./vue-router-ca350b6a.js";import{_ as B}from"./index-8cd997d5.js";import"./element-plus-01fea8a5.js";import"./lodash-es-32f1e46b.js";import"./@vueuse-7b4dcecb.js";import"./@element-plus-8b4f8802.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-2cb15ffa.js";import"./aplayer-d80f7f58.js";import"./async-validator-10c6301d.js";import"./memoize-one-297ddbcb.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-1ce37bfe.js";import"./vue-cookies-191b1cbf.js";import"./@highlightjs-a8dc01e9.js";import"./highlight.js-a76881e7.js";import"./axios-b5ee139b.js";import"./docx-preview-30c6d22b.js";import"./jszip-d9c085e9.js";import"./xlsx-04f2268f.js";import"./vue-pdf-embed-a25062db.js";import"./vue-9c0dbc85.js";import"./dplayer-ff9c2365.js";import"./vue-clipboard3-abb1cd37.js";import"./clipboard-2fdbe17c.js";const A={class:"share"},E={class:"body-content"},K={class:"code-panel"},T={class:"file-info"},J={class:"avatar"},L={class:"share-info"},M={class:"user-info"},O={class:"nick-name"},P={class:"share-time"},U={class:"file-name"},W={class:"code-body"},$={class:"input-area"},j={__name:"ShareCheck",setup(z){const{proxy:p}=x(),h=D(),f=q(),d={getShareInfo:"/showShare/getShareInfo",checkShareCode:"/showShare/checkShareCode"},i=f.params.shareId,o=c({});(async()=>{let s=await p.Request({url:d.getShareInfo,params:{shareId:i}});s&&(o.value=s.data)})();const n=c({}),u=c(),v={code:[{required:!0,message:"请输入提取码"},{min:5,message:"提取码为5位"},{max:5,message:"提取码为5位"}]},_=async()=>{u.value.validate(async s=>{!s||!await p.Request({url:d.checkShareCode,params:{shareId:i,code:n.value.code}})||h.push(`/share/${i}`)})};return(s,t)=>{const S=a("Avatar"),y=a("el-input"),k=a("el-button"),I=a("el-form-item"),g=a("el-form");return b(),w("div",A,[e("div",E,[t[4]||(t[4]=e("div",{class:"logo"},[e("span",{class:"iconfont icon-pan"}),e("span",{class:"name"},"Easy云盘")],-1)),e("div",K,[e("div",T,[e("div",J,[r(S,{userId:o.value.userId,avatar:o.value.avatar,width:50},null,8,["userId","avatar"])]),e("div",L,[e("div",M,[e("span",O,l(o.value.nickName),1),e("span",P,"分享于 "+l(o.value.shareTime),1)]),e("div",U,"分享文件："+l(o.value.fileName),1)])]),e("div",W,[t[3]||(t[3]=e("div",{class:"tips"},"请输入提取码：",-1)),e("div",$,[r(g,{model:n.value,rules:v,ref_key:"formDataRef",ref:u,maxLength:5,onSubmit:t[1]||(t[1]=R(()=>{},["prevent"]))},{default:m(()=>[r(I,{prop:"code"},{default:m(()=>[r(y,{class:"input",modelValue:n.value.code,"onUpdate:modelValue":t[0]||(t[0]=C=>n.value.code=C),onKeyup:V(_,["enter"])},null,8,["modelValue"]),r(k,{type:"primary",onClick:_},{default:m(()=>t[2]||(t[2]=[N("提取文件",-1)])),_:1,__:[2]})]),_:1})]),_:1},8,["model"])])])])])])}}},Ie=B(j,[["__scopeId","data-v-94cbaaea"]]);export{Ie as default};
